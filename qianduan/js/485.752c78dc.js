"use strict";(self["webpackChunkbylw"]=self["webpackChunkbylw"]||[]).push([[485],{8485:function(t,e,a){a.r(e),a.d(e,{default:function(){return c}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"person"},[e("el-row",{attrs:{type:"flex",gutter:15}},[e("el-col",{attrs:{span:10}},[e("el-card",{staticStyle:{width:"auto"}},[e("el-upload",{staticClass:"avatar-uploader",attrs:{action:"http://localhost:90/file/upload","show-file-list":!1,"on-success":t.handleAvatarSuccess}},[t.form.avatar?e("img",{staticClass:"avatar",attrs:{src:t.form.avatar}}):e("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),e("el-form",{attrs:{model:t.form,"label-width":"80px",size:"small"}},[e("el-form-item",{attrs:{label:"用户名"}},[e("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.username,callback:function(e){t.$set(t.form,"username",e)},expression:"form.username"}})],1),e("el-form-item",{attrs:{label:"昵称"}},[e("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.nickname,callback:function(e){t.$set(t.form,"nickname",e)},expression:"form.nickname"}})],1),e("el-form-item",{attrs:{label:"性别"}},[e("el-select",{attrs:{placeholder:"请选择性别"},model:{value:t.form.gender,callback:function(e){t.$set(t.form,"gender",e)},expression:"form.gender"}},[e("el-option",{attrs:{value:"男"}}),e("el-option",{attrs:{value:"女"}})],1)],1),e("el-form-item",{attrs:{label:"邮箱"}},[e("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email","string"===typeof e?e.trim():e)},expression:"form.email"}})],1),e("el-form-item",{attrs:{label:"电话"}},[e("el-input",{attrs:{autocomplete:"off",maxlength:"11"},model:{value:t.form.phone,callback:function(e){t.$set(t.form,"phone","string"===typeof e?e.trim():e)},expression:"form.phone"}})],1),e("el-form-item",{attrs:{label:"身份证"}},[e("el-input",{attrs:{autocomplete:"off",maxlength:"18"},model:{value:t.form.idcard,callback:function(e){t.$set(t.form,"idcard","string"===typeof e?e.trim():e)},expression:"form.idcard"}})],1),e("el-form-item",[e("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary"},on:{click:t.saveFormatReg}},[t._v("提交保存")]),e("el-button",{attrs:{type:"info"},on:{click:t.changePassword}},[t._v("修改密码")])],1)],1)],1)],1),e("el-col",{attrs:{span:14}},[e("el-card",{staticStyle:{width:"700px","margin-bottom":"20px"}},[e("h2",{staticStyle:{"margin-bootom":"10px"}},[t._v("我的房源信息")]),e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.ResidenceData,border:""}},[e("el-table-column",{attrs:{prop:"id",label:"id",width:"55"}}),e("el-table-column",{attrs:{prop:"doorplate",label:"门牌号",width:"80"}}),e("el-table-column",{attrs:{prop:"building",label:"楼宇",width:"80"}}),e("el-table-column",{attrs:{prop:"size",label:"规格",width:"80"}}),e("el-table-column",{attrs:{prop:"price",label:"价格",width:"80"}}),e("el-table-column",{attrs:{prop:"area",label:"面积/m²",width:"80"}}),e("el-table-column",{attrs:{prop:"time",label:"入住时间",width:"110"}}),e("el-table-column",{attrs:{prop:"note",label:"备注","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-popover",{attrs:{placement:"top",width:"400",trigger:"hover"}},[e("span",[t._v("备注:"+t._s(a.row.note))]),e("span",{attrs:{slot:"reference"},slot:"reference"},[t._v(t._s(a.row.note?a.row.note:""))])])]}}])})],1)],1),e("el-card",{staticStyle:{width:"700px"}},[e("h2",{staticStyle:{"margin-bootom":"10px"}},[t._v("我的车位信息")]),e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.ParkingData,border:""}},[e("el-table-column",{attrs:{prop:"id",label:"id",width:"55"}}),e("el-table-column",{staticStyle:{"text-align":"center"},attrs:{prop:"number",label:"车位编号",width:"180"}}),e("el-table-column",{attrs:{prop:"building",label:"楼宇",width:"180"}}),e("el-table-column",{attrs:{prop:"state",label:"车位状态",width:"150"},scopedSlots:t._u([{key:"default",fn:function(a){return["空闲"==a.row.state?e("span",{staticClass:"text",staticStyle:{backgroundColor:"#909399"}},[t._v(t._s(a.row.state))]):e("span",{staticClass:"text",staticStyle:{backgroundColor:"#67C23A"}},[t._v(t._s(a.row.state))])]}}])})],1)],1)],1)],1)],1)},r=[],l=(a(7658),{name:"Person",data(){return{ResidenceData:[],ParkingData:[],form:{},user:JSON.parse(sessionStorage.getItem("user"))||"",phoneReg:/^1[3|4|5|6|7|8|9]{1}[0-9]{9}/,emailReg:/^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/,idcardReg:/^([1-6][1-9]|50)\d{4}(18|19|20)\d{2}((0[1-9])|10|11|12)(([0-2][1-9])|10|20|30|31)\d{3}[0-9Xx]$/,idcardReg2:/^([1-6][1-9]|50)\d{4}\d{2}((0[1-9])|10|11|12)(([0-2][1-9])|10|20|30|31)\d{3}$/}},created(){this.load()},methods:{save(){this.request.post("/api/user",this.form).then((t=>{"200"===t.code?(this.$message.success("保存成功"),this.request.get("/api/user/username/"+this.user.username).then((t=>{if("200"===t.code){let e=t.data;e.token=this.user.token,sessionStorage.setItem("user",JSON.stringify(e)),this.$bus.$emit("update")}}))):this.$message.error("编辑失败")}))},saveFormatReg(){this.form.idcard&&(this.form.idcard=this.form.idcard.split(" ").join("")),this.emailReg.test(this.form.email)?this.phoneReg.test(this.form.phone)?this.idcardReg.test(this.form.idcard)||this.idcardReg2.test(this.form.idcard)?this.save():this.$message.error("身份证格式错误！"):this.$message.error("手机号格式错误！"):this.$message.error("邮箱格式错误！")},load(){this.request.get("/api/user/username/"+this.user.username).then((t=>{"200"===t.code&&(this.form=t.data)})),this.request.get("/api/residence/"+this.user.id).then((t=>{"200"===t.code&&(this.ResidenceData=t.data)})),this.request.get("/api/parking/"+this.user.id).then((t=>{"200"===t.code&&(this.ParkingData=t.data)}))},handleAvatarSuccess(t){this.form.avatar=t},changePassword(){this.$store.commit("man/tabListAdd",{path:"/password",name:"修改密码"}),this.$router.push("password")}}}),o=l,i=a(1001),n=(0,i.Z)(o,s,r,!1,null,"7c60dbc3",null),c=n.exports}}]);
//# sourceMappingURL=485.752c78dc.js.map