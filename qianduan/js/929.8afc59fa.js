"use strict";(self["webpackChunkbylw"]=self["webpackChunkbylw"]||[]).push([[929],{2929:function(r,e,s){s.r(e),s.d(e,{default:function(){return n}});s(7658);var o=function(){var r=this,e=r._self._c;return e("div",{staticClass:"password"},[e("el-form",{ref:"resetPwdForm",attrs:{rules:r.rules,model:r.resetPwdForm}},[e("el-form-item",{attrs:{label:"旧密码",prop:"oldpwd"}},[e("el-input",{attrs:{size:"medium",placeholder:"  请输入旧密码","prefix-icon":"el-icon-user",autocomplete:"off"},model:{value:r.resetPwdForm.oldpwd,callback:function(e){r.$set(r.resetPwdForm,"oldpwd",e)},expression:"resetPwdForm.oldpwd"}})],1),e("el-form-item",{attrs:{label:"新密码",prop:"password"}},[e("el-input",{attrs:{size:"medium",type:"password",placeholder:"  请输入新密码","show-password":!0,"prefix-icon":"el-icon-lock",autocomplete:"off"},model:{value:r.resetPwdForm.password,callback:function(e){r.$set(r.resetPwdForm,"password",e)},expression:"resetPwdForm.password"}})],1),e("el-form-item",{attrs:{label:"确认新密码",prop:"passwordC"}},[e("el-input",{attrs:{size:"medium",type:"password",placeholder:"  请确认新密码","prefix-icon":"el-icon-user",autocomplete:"off"},model:{value:r.resetPwdForm.passwordC,callback:function(e){r.$set(r.resetPwdForm,"passwordC",e)},expression:"resetPwdForm.passwordC"}})],1),e("el-button",{staticStyle:{margin:"10px 20px 0 0"},attrs:{type:"primary"},on:{click:r.confirmChange}},[r._v("确认修改")]),e("el-button",{attrs:{type:"primary"},on:{click:function(e){return r.$router.push("/person")}}},[r._v("取消")])],1)],1)},t=[],a={name:"Password",data(){const r=(r,e,s)=>{e?e.toString().length<3||e.toString().length>20?s(new Error("密码长度为3-20")):e!==this.user.password?s(new Error("旧密码输入错误")):s():s(new Error("请输入旧密码"))},e=(r,e,s)=>{e?e.toString().length<3||e.toString().length>20?s(new Error("密码长度为3-20")):e===this.resetPwdForm.oldpwd?s(new Error("新旧密码一致！请重新输入...")):s():s(new Error("请输入新密码"))},s=(r,e,s)=>{e?e!==this.resetPwdForm.password?s(new Error("两次密码输入不一致！")):s():s(new Error("请确认密码"))};return{user:JSON.parse(sessionStorage.getItem("user")),resetPwdForm:{oldpwd:"",password:"",passwordC:""},rules:{oldpwd:[{required:!0,validator:r,trigger:"blur"}],password:[{required:!0,validator:e,trigger:"blur"}],passwordC:[{required:!0,validator:s,trigger:"blur"}]}}},methods:{async confirmChange(){let r=await this.getOldPassword();console.log(r),this.oldpwd===r.data&&this.$refs.resetPwdForm.validate((r=>{r&&this.request.post("/api/user",{id:this.user.id,username:this.user.username,password:this.resetPwdForm.password}).then((r=>{console.log(r),"200"===r.code?(this.$message.success("密码修改成功"),this.$router.push("person")):this.$message.error("密码修改失败")}))}))},getOldPassword(){}}},l=a,d=s(1001),i=(0,d.Z)(l,o,t,!1,null,null,null),n=i.exports}}]);
//# sourceMappingURL=929.8afc59fa.js.map