"use strict";(self["webpackChunkbylw"]=self["webpackChunkbylw"]||[]).push([[408],{4408:function(e,t,a){a.r(t),a.d(t,{default:function(){return c}});var o=function(){var e=this,t=e._self._c;return t("div",{staticClass:"pay"},[t("el-select",{attrs:{placeholder:"请选择"},on:{change:e.selectDoor},model:{value:e.currentDoorplate,callback:function(t){e.currentDoorplate=t},expression:"currentDoorplate"}},e._l(e.residenceInfo,(function(e){return t("el-option",{key:e.id,attrs:{label:e.doorplate,value:e.doorplate}})})),1),t("el-tag",{attrs:{type:"primary"}},[e._v("可选择对应房产查看缴费信息")]),e.noNeedToPay?e._e():t("el-table",{staticStyle:{width:"100%",margin:"15px 0"},attrs:{data:e.tableData,stripe:"",border:""}},[t("el-table-column",{attrs:{prop:"doorplate",label:"门牌号",width:"140"}}),t("el-table-column",{attrs:{prop:"building",label:"楼宇",width:"140"}}),t("el-table-column",{attrs:{prop:"type",label:"费用类型",width:"140"}}),t("el-table-column",{attrs:{prop:"money",label:"缴费金额",width:"140"}}),t("el-table-column",{attrs:{prop:"createTime",label:"开始时间",width:"140"}}),t("el-table-column",{attrs:{prop:"payTime",label:"缴费时间",width:"140"}}),t("el-table-column",{attrs:{prop:"state",label:"是否已缴费",width:"140"},scopedSlots:e._u([{key:"default",fn:function(a){return["未支付"==a.row.state?t("span",{staticClass:"text",staticStyle:{backgroundColor:"#909399"},attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(a.row.state))]):t("span",{staticClass:"text",staticStyle:{backgroundColor:"#67C23A"},attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(a.row.state))])]}}],null,!1,3718896311)}),t("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-popconfirm",{staticStyle:{"margin-left":"5px"},attrs:{"confirm-button-text":"确认","cancel-button-text":"再想想",icon:"el-icon-info","icon-color":"red",title:"是否确认缴费？"},on:{confirm:function(t){return e.handlePay(a.row.id)}}},["未支付"==a.row.state?t("el-button",{attrs:{slot:"reference",size:"mini",type:"success"},slot:"reference"},[e._v("缴费 "),t("i",{staticClass:"el-icon-edit"})]):e._e()],1)]}}],null,!1,111516760)})],1),e.noNeedToPay?e._e():t("el-pagination",{attrs:{"current-page":e.pageNum,"page-sizes":[5,10,15,20],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),e.noNeedToPay?t("el-tag",[e._v("您还未购置房产，无需缴纳费用")]):e._e()],1)},r=[],l={name:"PayUser",data(){return{tableData:[],pageNum:1,pageSize:5,total:0,user:JSON.parse(sessionStorage.getItem("user"))||"",noNeedToPay:!1,residenceInfo:JSON.parse(sessionStorage.getItem("residence"))||"",currentDoorplate:""}},created(){this.residenceInfo?(this.currentDoorplate=this.residenceInfo[0].doorplate,this.load()):this.noNeedToPay=!0},methods:{handleSizeChange(e){this.pageSize=e,this.load()},handleCurrentChange(e){this.pageNum=e,this.load()},load(){this.request.get("/api/pay/page",{params:{pageNum:this.pageNum,pageSize:this.pageSize,doorplate:this.currentDoorplate}}).then((e=>{"200"===e.code&&(this.tableData=e.data.records,this.total=e.data.total)}))},handlePay(e){const t=this.tool.getNowDate();this.request.post("/api/pay",{id:e,state:"已缴费",payTime:t}).then((e=>{"200"===e.code?(this.$message.success("缴费成功"),this.load()):this.$message.error("缴费失败")}))},selectDoor(e){this.currentDoorplate=e,this.load()}}},s=l,n=a(1001),i=(0,n.Z)(s,o,r,!1,null,"48efe915",null),c=i.exports}}]);
//# sourceMappingURL=408.d62814ae.js.map