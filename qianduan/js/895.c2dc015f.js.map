{"version":3,"file":"js/895.c2dc015f.js","mappings":"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","sources":["webpack://bylw/./src/views/Files/Files.vue","webpack://bylw/src/views/Files/Files.vue","webpack://bylw/./src/views/Files/Files.vue?8637","webpack://bylw/./src/views/Files/Files.vue?8214"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('div',{staticClass:\"search\"},[_c('el-input',{staticStyle:{\"width\":\"200px\"},attrs:{\"placeholder\":\"请输入文件名称\",\"prefix-icon\":\"el-icon-search\"},model:{value:(_vm.name),callback:function ($$v) {_vm.name=(typeof $$v === 'string'? $$v.trim(): $$v)},expression:\"name\"}}),_c('el-button',{staticStyle:{\"margin-left\":\"5px\"},attrs:{\"type\":\"primary\"},on:{\"click\":_vm.load}},[_vm._v(\"搜索\")]),_c('el-button',{attrs:{\"type\":\"warning\"},on:{\"click\":function($event){_vm.name='',_vm.load()}}},[_vm._v(\"重置\")])],1),_c('el-upload',{ref:\"upload\",staticStyle:{\"display\":\"inline-block\"},attrs:{\"action\":\"http://localhost:90/file/upload\",\"show-file-list\":false,\"on-success\":_vm.onSuccess,\"before-upload\":_vm.beforeUpload}},[_c('el-button',{staticStyle:{\"margin\":\"10px 10px 10px 0\"},attrs:{\"type\":\"primary\"}},[_vm._v(\"文件上传 \"),_c('i',{staticClass:\"el-icon-top\"})])],1),_c('el-dialog',{attrs:{\"title\":\"文件信息更改\",\"visible\":_vm.dialogFormVisible,\"width\":\"550px\"},on:{\"update:visible\":function($event){_vm.dialogFormVisible=$event}}},[_c('el-form',{attrs:{\"model\":_vm.form,\"label-width\":\"80px\"}},[_c('el-form-item',{attrs:{\"label\":\"图片名\"}},[_c('el-input',{model:{value:(_vm.form.name),callback:function ($$v) {_vm.$set(_vm.form, \"name\", $$v)},expression:\"form.name\"}})],1)],1),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.dialogFormVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.save}},[_vm._v(\"确 定\")])],1)],1),_c('el-table',{staticStyle:{\"width\":\"100%\",\"margin-bottom\":\"15px\"},attrs:{\"data\":_vm.tableData,\"stripe\":\"\",\"border\":\"\"}},[_c('el-table-column',{attrs:{\"prop\":\"id\",\"label\":\"id\",\"width\":\"100\"}}),_c('el-table-column',{attrs:{\"prop\":\"name\",\"label\":\"文件名称\",\"width\":\"350\"}}),_c('el-table-column',{attrs:{\"prop\":\"url\",\"label\":\"图片预览\",\"width\":\"210\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(_vm.PicReg.test(scope.row.type))?_c('el-popover',{attrs:{\"placement\":\"right\",\"title\":\"\",\"trigger\":\"click\"}},[(scope.row.url)?_c('el-image',{staticStyle:{\"max-height\":\"120px\",\"max-width\":\"120px\"},attrs:{\"slot\":\"reference\",\"src\":scope.row.url,\"alt\":scope.row.url},slot:\"reference\"}):_vm._e(),_c('el-image',{attrs:{\"src\":scope.row.url}})],1):_c('el-tag',[_vm._v(\"非图片格式\")])]}}])}),_c('el-table-column',{attrs:{\"prop\":\"type\",\"label\":\"文件类型\",\"width\":\"100\"}}),_c('el-table-column',{attrs:{\"prop\":\"size\",\"label\":\"文件大小(kb)\",\"width\":\"120\"}}),_c('el-table-column',{attrs:{\"label\":\"下载\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.handleLoadFile(scope.row)}}},[_vm._v(\"下载\")])]}}])}),_c('el-table-column',{attrs:{\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.edit(scope.row)}}},[_vm._v(\"编辑\")])]}}])})],1),_c('el-pagination',{attrs:{\"current-page\":_vm.pageNum,\"page-sizes\":[7, 14, 21, 28],\"page-size\":_vm.pageSize,\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.total},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <!-- 搜索 -->\r\n    <div class=\"search\">\r\n      <el-input placeholder=\"请输入文件名称\" style=\"width:200px\" prefix-icon=\"el-icon-search\" v-model.trim=\"name\"></el-input>\r\n      <el-button @click=\"load\" type=\"primary\" style=\"margin-left: 5px;\">搜索</el-button>\r\n      <el-button @click=\"name='',load()\" type=\"warning\">重置</el-button>\r\n    </div>\r\n    <!-- 导入-->\r\n    <el-upload ref=\"upload\" action=\"http://localhost:90/file/upload\" :show-file-list=\"false\" :on-success=\"onSuccess\" \r\n               :before-upload=\"beforeUpload\" style=\"display: inline-block;\">\r\n        <el-button type=\"primary\" style=\"margin:10px 10px 10px 0;\">文件上传 <i class=\"el-icon-top\"></i></el-button>\r\n    </el-upload>\r\n\r\n    <el-dialog title=\"文件信息更改\" :visible.sync=\"dialogFormVisible\" width=\"550px\">\r\n      <el-form :model=\"form\" label-width=\"80px\">\r\n        <el-form-item label=\"图片名\">\r\n          <el-input v-model=\"form.name\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"dialogFormVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"save\">确 定</el-button>\r\n      </div>\r\n    </el-dialog>\r\n\r\n    <!-- data -->\r\n    <el-table :data=\"tableData\" stripe border style=\"width: 100%; margin-bottom: 15px;\">\r\n      <!-- 可选 -->\r\n      <el-table-column prop=\"id\" label=\"id\" width=\"100\"></el-table-column>\r\n      <el-table-column prop=\"name\" label=\"文件名称\" width=\"350\"></el-table-column>\r\n      <el-table-column prop=\"url\" label=\"图片预览\" width=\"210\">\r\n        <template slot-scope=\"scope\">\r\n          <el-popover placement=\"right\" title=\"\" trigger=\"click\" v-if=\"PicReg.test(scope.row.type)\">\r\n            <el-image slot=\"reference\" v-if=\"scope.row.url\" :src=\"scope.row.url\" :alt=\"scope.row.url\" style=\"max-height: 120px;max-width: 120px\"></el-image>\r\n            <el-image :src=\"scope.row.url\"></el-image>\r\n         </el-popover>\r\n         <el-tag v-else>非图片格式</el-tag>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column prop=\"type\" label=\"文件类型\" width=\"100\"></el-table-column>\r\n      <el-table-column prop=\"size\" label=\"文件大小(kb)\" width=\"120\"></el-table-column>\r\n      <el-table-column label=\"下载\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button type=\"primary\" @click=\"handleLoadFile(scope.row)\">下载</el-button>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"操作\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button type=\"primary\" @click=\"edit(scope.row)\">编辑</el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n    <!-- 分页器 -->\r\n    <el-pagination\r\n      @size-change=\"handleSizeChange\"\r\n      @current-change=\"handleCurrentChange\"\r\n      :current-page=\"pageNum\"\r\n      :page-sizes=\"[7, 14, 21, 28]\"\r\n      :page-size=\"pageSize\"\r\n      layout=\"total, sizes, prev, pager, next, jumper\"\r\n      :total=\"total\">\r\n    </el-pagination>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    name:\"Files\",\r\n    data() {\r\n      return {\r\n        tableData:[],\r\n        pageNum:1,  //当前页数\r\n        pageSize:7,   //页数的大小\r\n        total:0,\r\n        name:'',\r\n        PicReg: /^(jpg|bmp|gif|ico|pcx|jpeg|tif|png|raw|tga)$/,\r\n        dialogFormVisible: false,\r\n        form: { id:'',name:''}\r\n      }\r\n    },\r\n    created() {\r\n      this.load()\r\n    },\r\n    methods: {\r\n      handleSizeChange(val) {\r\n        this.pageSize = val\r\n        this.load()\r\n      },\r\n      handleCurrentChange(val) {\r\n        this.pageNum = val\r\n        this.load()\r\n      },\r\n      load(){\r\n        this.request.get('/api/file/page',{params:{pageNum:this.pageNum,pageSize:this.pageSize,name:this.name}})\r\n        .then((value) => {\r\n          if(value.code=='200'){\r\n            this.tableData=value.data.records //获取文件列表\r\n            this.total=value.data.total\r\n          }\r\n        })\r\n      },\r\n      //文件下载\r\n      handleLoadFile(row){\r\n        console.log(row);\r\n        window.open(row.url)\r\n      },\r\n      //文件上传成功\r\n      onSuccess(){\r\n        this.$message.success(\"文件上传成功\")\r\n        this.load()\r\n      },\r\n      //验证大小<1mb\r\n      beforeUpload(file) {\r\n        const isEXceedSize = file.size / 1024 / 1024 < 1;\r\n        if (!isEXceedSize) {\r\n          this.$message.error('上传文件大小不能超过 1MB!');\r\n          return false;\r\n        }\r\n        return true;\r\n      },\r\n      edit(row){\r\n        this.form.id = row.id\r\n        this.form.name = row.name\r\n        this.dialogFormVisible = true\r\n      },\r\n      save(){\r\n        this.request.post(\"/api/file/update\",this.form).then(res => {\r\n          if(res.code === '200'){\r\n            this.$message.success(\"操作成功\")\r\n            this.load()\r\n            this.dialogFormVisible = false\r\n          }else{\r\n            this.$message.error(\"error\")\r\n          }\r\n        })\r\n      },\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.block{\r\n  .search{\r\n    .el-input{\r\n      margin-right: 5px;\r\n    }\r\n  }\r\n  .el-table .warning-row {\r\n    background: oldlace;\r\n  }\r\n\r\n  .el-table .success-row {\r\n    background: #f0f9eb;\r\n  }\r\n}\r\n  \r\n</style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Files.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Files.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Files.vue?vue&type=template&id=2a724aae&scoped=true&\"\nimport script from \"./Files.vue?vue&type=script&lang=js&\"\nexport * from \"./Files.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Files.vue?vue&type=style&index=0&id=2a724aae&prod&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2a724aae\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","staticStyle","attrs","model","value","name","callback","$$v","trim","expression","on","load","_v","$event","ref","onSuccess","beforeUpload","dialogFormVisible","form","$set","slot","save","tableData","scopedSlots","_u","key","fn","scope","PicReg","test","row","type","url","_e","handleLoadFile","edit","pageNum","pageSize","total","handleSizeChange","handleCurrentChange","staticRenderFns","data","id","created","methods","params","then","console","window","component"],"sourceRoot":""}